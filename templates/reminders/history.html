{% extends 'base.html' %}
{% load static %}

{% block extra-styles %}
<!-- Ensure Tailwind is loaded in base.html or include CDN here if needed -->
<link rel="stylesheet" href="{% static 'css/__reminders.css' %}" />
{% endblock %}

{% block title %}Reminder History{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-200 py-10 px-2">
    <div class="max-w-3xl mx-auto">
        <div class="flex items-center justify-between mb-8">
            <h1 class="text-3xl font-extrabold text-gray-900 flex items-center gap-3 drop-shadow">
                <span class="inline-block animate-bounce">üìä</span> Medicine History
            </h1>
            <a href="{% url 'reminders:home' %}" class="transition-all shadow hover:shadow-lg text-blue-800 font-medium hover:text-blue-600 px-5 py-2 rounded-lg bg-white/80 border border-blue-200 hover:bg-blue-50">
                ‚Üê Back to Reminders
            </a>
        </div>

        <div class="bg-white/80 backdrop-blur-md shadow-2xl rounded-2xl p-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-purple-700 mb-6 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><title>Pill</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 11l2 2m0 0l-2 2m2-2h.01M17.657 6.343a8 8 0 11-11.314 11.314 8 8 0 0111.314-11.314z" /></svg>
                Recently Taken Medicines
            </h2>

            {% if taken_doses %}
                <ul class="divide-y divide-gray-200">
                    {% for dose in taken_doses %}
                        <li class="flex justify-between items-center py-5 transition hover:bg-purple-50/40 rounded-lg">
                            <div>
                                <span class="font-semibold text-gray-900 text-lg">{{ dose.medicine.name }}</span>
                                <span class="text-sm text-gray-500 ml-2">{{ dose.medicine.dosage_amount }} {{ dose.medicine.get_dosage_unit_display }}</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-green-600">{{ dose.date_taken|date:"M j, Y" }}</div>
                                <div class="text-xs text-gray-500">{{ dose.time_taken|time:"g:i A" }}</div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="text-center py-12 text-gray-400">
                    <svg class="mx-auto mb-4 h-14 w-14 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><title>History Empty</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <p class="text-lg">No medication history found.<br>
                        <span class="text-sm">Start taking your medicines and mark them as taken!</span>
                    </p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}